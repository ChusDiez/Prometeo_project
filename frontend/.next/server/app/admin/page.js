(()=>{var e={};e.id=698,e.ids=[698],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},3995:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(260),a=r(8203),n=r(5155),o=r.n(n),i=r(7292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5542)),"/Users/Chus/Desktop/Prometeo project/frontend/app/admin/page.jsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9611)),"/Users/Chus/Desktop/Prometeo project/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/Chus/Desktop/Prometeo project/frontend/app/admin/page.jsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},560:(e,t,r)=>{Promise.resolve().then(r.bind(r,5542))},288:(e,t,r)=>{Promise.resolve().then(r.bind(r,7588))},4883:(e,t,r)=>{Promise.resolve().then(r.bind(r,9611))},539:(e,t,r)=>{Promise.resolve().then(r.bind(r,328))},9085:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},1634:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,7174,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},7588:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(5512),a=r(8009),n=r(2273),o=r(9284);let i=(0,o.zD)("admin/updateExam",async({examId:e,payload:t})=>({message:"Examen actualizado con \xe9xito"})),l=(0,o.zD)("admin/fetchUsersScores",async()=>[{user_id:1,exam_id:123,final_score:8.5,users:{id:1,email:"test@example.com"},exams:{id:123,title:"Examen A"}}]),d=(0,o.zD)("admin/fetchExamsStats",async()=>[{exam_id:"ABC",p80:9,p70:8,p60:7,media:7.5}]),c=(0,o.Z0)({name:"admin",initialState:{updatingExam:!1,updateError:null,updateMessage:null,usersScores:[],loadingScores:!1,scoresError:null,examsStats:[],loadingStats:!1,statsError:null},reducers:{clearAdminMessages(e){e.updateError=null,e.updateMessage=null}},extraReducers:e=>{e.addCase(i.pending,e=>{e.updatingExam=!0,e.updateError=null,e.updateMessage=null}).addCase(i.fulfilled,(e,t)=>{e.updatingExam=!1,e.updateMessage=t.payload.message}).addCase(i.rejected,(e,t)=>{e.updatingExam=!1,e.updateError=t.error.message||"Error al actualizar examen"}),e.addCase(l.pending,e=>{e.loadingScores=!0,e.scoresError=null}).addCase(l.fulfilled,(e,t)=>{e.loadingScores=!1,e.usersScores=t.payload}).addCase(l.rejected,(e,t)=>{e.loadingScores=!1,e.scoresError=t.error.message||"Error al cargar userScores"}),e.addCase(d.pending,e=>{e.loadingStats=!0,e.statsError=null}).addCase(d.fulfilled,(e,t)=>{e.loadingStats=!1,e.examsStats=t.payload}).addCase(d.rejected,(e,t)=>{e.loadingStats=!1,e.statsError=t.error.message||"Error al obtener estad\xedsticas"})}}),{clearAdminMessages:p}=c.actions;function u(){let e=(0,n.wA)(),{updatingExam:t,updateError:r,updateMessage:o,usersScores:l,loadingScores:d,scoresError:c,examsStats:p,loadingStats:u,statsError:x}=(0,n.d4)(e=>e.admin),[m,j]=(0,a.useState)(null),[g,v]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),[y,C]=(0,a.useState)(""),[S,E]=(0,a.useState)(""),[P,k]=(0,a.useState)(""),[_,D]=(0,a.useState)(""),[w,A]=(0,a.useState)([]),[G,I]=(0,a.useState)(!1),[z,U]=(0,a.useState)(null),[M,T]=(0,a.useState)("");async function q(){if(v(""),f(""),!m){v("Selecciona un archivo CSV primero");return}try{let e=process.env.NEXT_PUBLIC_API_BASE_URL||"https://prometeoproject-production.up.railway.app",t=new FormData;t.append("csvFile",m),t.append("start_date",S),t.append("end_date",P),t.append("zoom_url",_),t.append("examId",y);let r=await fetch(`${e}/api/exams/upload-csv`,{method:"POST",body:t});if(!r.ok){let e=await r.json();throw Error(e.error||"Error al subir CSV")}let s=await r.json();f(`CSV subido OK. examId: ${s.examId||""}`)}catch(e){console.error(e),v(e.message)}}let R=p.filter(e=>""===M||e.exam_id.includes(M));return(0,s.jsxs)("div",{style:h.container,children:[(0,s.jsx)("h1",{children:"Admin Dashboard"}),(0,s.jsxs)("section",{style:h.section,children:[(0,s.jsx)("h2",{children:"Subir CSV + Examen Data"}),(0,s.jsxs)("div",{style:h.formGroup,children:[(0,s.jsx)("label",{children:"Archivo CSV:"}),(0,s.jsx)("input",{type:"file",accept:".csv",onChange:function(e){j(e.target.files[0])}})]}),(0,s.jsxs)("div",{style:h.formGroup,children:[(0,s.jsx)("label",{children:"Exam ID (opcional):"}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)("div",{style:h.formGroup,children:[(0,s.jsx)("label",{children:"Start Date:"}),(0,s.jsx)("input",{type:"datetime-local",value:S,onChange:e=>E(e.target.value)})]}),(0,s.jsxs)("div",{style:h.formGroup,children:[(0,s.jsx)("label",{children:"End Date:"}),(0,s.jsx)("input",{type:"datetime-local",value:P,onChange:e=>k(e.target.value)})]}),(0,s.jsxs)("div",{style:h.formGroup,children:[(0,s.jsx)("label",{children:"Zoom URL:"}),(0,s.jsx)("input",{type:"text",value:_,onChange:e=>D(e.target.value)})]}),(0,s.jsx)("button",{onClick:q,children:"Subir CSV / Crear-Actualizar"}),g&&(0,s.jsx)("p",{style:{color:"red"},children:g}),b&&(0,s.jsx)("p",{style:{color:"green"},children:b})]}),(0,s.jsxs)("section",{style:h.section,children:[(0,s.jsx)("h2",{children:"Editar Examen"}),(0,s.jsxs)("div",{style:h.formGroup,children:[(0,s.jsx)("label",{children:"Exam ID:"}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)("div",{style:h.formGroup,children:[(0,s.jsx)("label",{children:"Start Date:"}),(0,s.jsx)("input",{type:"datetime-local",value:S,onChange:e=>E(e.target.value)})]}),(0,s.jsxs)("div",{style:h.formGroup,children:[(0,s.jsx)("label",{children:"End Date:"}),(0,s.jsx)("input",{type:"datetime-local",value:P,onChange:e=>k(e.target.value)})]}),(0,s.jsxs)("div",{style:h.formGroup,children:[(0,s.jsx)("label",{children:"Zoom URL:"}),(0,s.jsx)("input",{type:"text",value:_,onChange:e=>D(e.target.value)})]}),(0,s.jsx)("button",{onClick:function(){if(!y){alert("Especifica el ID del examen");return}e(i({examId:y,payload:{start_date:S,end_date:P,zoom_url:_}}))},disabled:t,children:t?"Guardando...":"Guardar Cambios"}),r&&(0,s.jsx)("p",{style:{color:"red"},children:r}),o&&(0,s.jsx)("p",{style:{color:"green"},children:o})]}),(0,s.jsxs)("section",{style:h.section,children:[(0,s.jsx)("h2",{children:"Usuarios y Notas (userScores)"}),d&&(0,s.jsx)("p",{children:"Cargando users-scores..."}),c&&(0,s.jsx)("p",{style:{color:"red"},children:c}),!d&&!c&&l.length>0&&(0,s.jsxs)("table",{style:h.table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"User ID"}),(0,s.jsx)("th",{children:"Exam ID"}),(0,s.jsx)("th",{children:"Final Score"}),(0,s.jsx)("th",{children:"Usuario / Examen"})]})}),(0,s.jsx)("tbody",{children:l.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.user_id}),(0,s.jsx)("td",{children:e.exam_id}),(0,s.jsx)("td",{children:e.final_score}),(0,s.jsxs)("td",{children:[e.users?.email," / ",e.exams?.title]})]},t))})]})]}),(0,s.jsxs)("section",{style:h.section,children:[(0,s.jsx)("h2",{children:"Lista de Usuarios (fetch /api/admin/users)"}),G&&(0,s.jsx)("p",{children:"Cargando usuarios..."}),z&&(0,s.jsx)("p",{style:{color:"red"},children:z}),!G&&!z&&w.length>0&&(0,s.jsxs)("table",{style:h.table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Nombre"}),(0,s.jsx)("th",{children:"Email"}),(0,s.jsx)("th",{children:"Nota (ej)"})]})}),(0,s.jsx)("tbody",{children:w.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.id}),(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.email}),(0,s.jsx)("td",{children:e.nota})]},e.id))})]})]}),(0,s.jsxs)("section",{style:h.section,children:[(0,s.jsx)("h2",{children:"Estad\xedsticas de Ex\xe1menes (p80, p70, p60, media)"}),(0,s.jsx)("label",{children:"Filtrar exam_id: "}),(0,s.jsx)("input",{type:"text",value:M,onChange:e=>T(e.target.value),style:{marginBottom:"10px"}}),u&&(0,s.jsx)("p",{children:"Cargando estad\xedsticas..."}),x&&(0,s.jsx)("p",{style:{color:"red"},children:x}),!u&&!x&&R.length>0&&(0,s.jsxs)("table",{style:h.table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Exam ID"}),(0,s.jsx)("th",{children:"p80"}),(0,s.jsx)("th",{children:"p70"}),(0,s.jsx)("th",{children:"p60"}),(0,s.jsx)("th",{children:"Media"})]})}),(0,s.jsx)("tbody",{children:R.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.exam_id}),(0,s.jsx)("td",{children:e.p80}),(0,s.jsx)("td",{children:e.p70}),(0,s.jsx)("td",{children:e.p60}),(0,s.jsx)("td",{children:e.media})]},t))})]}),!u&&!x&&0===R.length&&(0,s.jsx)("p",{children:"No hay datos de estad\xedstica para ese examen."})]})]})}c.reducer;let h={container:{maxWidth:"800px",margin:"0 auto",padding:"20px",fontFamily:"sans-serif"},section:{marginBottom:"30px",border:"1px solid #ccc",padding:"15px",borderRadius:"6px"},formGroup:{marginBottom:"10px"},table:{width:"100%",borderCollapse:"collapse"}}},328:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var s=r(5512),a=r(9284),n=r(9336),o=r(7754);let i=(0,a.Z0)({name:"theme",initialState:{isDarkMode:!1},reducers:{toggleTheme:e=>{e.isDarkMode=!e.isDarkMode}}}),{toggleTheme:l}=i.actions,d=i.reducer,c={key:"theme",storage:o.A},p=(0,n.rL)(c,d),u=(0,a.U1)({reducer:{theme:p},middleware:e=>e({serializableCheck:!1})}),h=(0,n.GM)(u);var x=r(2273),m=r(4107);function j({children:e}){return(0,s.jsx)(x.Kq,{store:u,children:(0,s.jsx)(m.Q,{loading:null,persistor:h,children:e})})}r(6080);var g=r(1654),v=r(9334),b=r(8009),f=r(5103);let y=()=>{let e=(0,v.useRouter)(),t=(0,g.j)(),r=(0,g.G)(e=>e.theme.isDarkMode);return(0,b.useEffect)(()=>{document.documentElement.setAttribute("data-theme",r?"dark":"light")},[r]),(0,s.jsxs)("header",{style:{position:"fixed",top:0,left:0,width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px 40px",zIndex:9999,backgroundColor:"var(--color-background)",borderBottom:"1px solid var(--color-border)",backdropFilter:"blur(5px)"},children:[(0,s.jsx)("button",{onClick:()=>e.push("/"),style:{background:"none",border:"none",cursor:"pointer",padding:0},children:(0,s.jsx)(f.default,{src:"https://iz.academy/wp-content/uploads/2022/06/Logo_ST_Black.png",alt:"Logo",style:{width:"100px",height:"auto",filter:r?"invert(1)":"none"},loader:({src:e})=>e})}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[(0,s.jsx)("button",{onClick:()=>e.push("/"),style:{background:"none",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",color:"var(--color-text)"}}),(0,s.jsx)("div",{style:{fontSize:"1.4rem",fontWeight:600,color:"var(--color-text)",letterSpacing:"0.5px"},children:"Proyecto Prometeo"}),(0,s.jsx)("button",{onClick:()=>{t(l()),localStorage.setItem("theme",r?"light":"dark")},style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.5rem",padding:"0 5px",color:"var(--color-text)"},children:r?"\uD83C\uDF1E":"\uD83C\uDF19"})]})]})};function C({children:e}){let[t,r]=(0,b.useState)(!1);return t?(0,s.jsx)("html",{lang:"es",children:(0,s.jsx)("body",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",paddingTop:"120px",backgroundColor:"var(--color-background)",color:"var(--color-text)"},children:(0,s.jsxs)(j,{children:[(0,s.jsx)(y,{}),e,(0,s.jsxs)("footer",{style:{marginTop:"auto",padding:"20px 40px",backgroundColor:"var(--color-background)",borderTop:"1px solid var(--color-border)",textAlign:"center",fontSize:"0.9rem",color:"var(--color-subtext)"},children:[(0,s.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," IZETA Academy. Todos los derechos reservados."]}),(0,s.jsxs)("div",{style:{marginTop:"8px"},children:[(0,s.jsx)("a",{href:"/privacidad",style:{color:"var(--color-subtext)",textDecoration:"none",margin:"0 10px"},children:"Privacidad"}),(0,s.jsx)("a",{href:"/terminos",style:{color:"var(--color-subtext)",textDecoration:"none",margin:"0 10px"},children:"T\xe9rminos"})]})]})]})})}):(0,s.jsx)("html",{lang:"es",children:(0,s.jsx)("body",{style:{visibility:"hidden",backgroundColor:"var(--color-background)"},children:(0,s.jsx)("div",{style:{width:"100vw",height:"100vh"}})})})}},1654:(e,t,r)=>{"use strict";r.d(t,{G:()=>n,j:()=>a});var s=r(2273);let a=()=>(0,s.wA)(),n=s.d4},5542:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/Chus/Desktop/Prometeo project/frontend/app/admin/page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/Chus/Desktop/Prometeo project/frontend/app/admin/page.jsx","default")},9611:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/Chus/Desktop/Prometeo project/frontend/app/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/Chus/Desktop/Prometeo project/frontend/app/layout.tsx","default")},6055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(8077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},6080:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,691,77],()=>r(3995));module.exports=s})();