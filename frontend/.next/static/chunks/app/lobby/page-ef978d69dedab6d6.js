(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{638:(e,t,n)=>{Promise.resolve().then(n.bind(n,5477))},5477:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5155),a=n(2115),s=n(3391),o=n(8943);let l=(0,o.zD)("lobby/fetchCurrentExam",async()=>({id:123,title:"Examen final",start_date:"2025-01-30T10:00:00Z"}));(0,o.Z0)({name:"lobby",initialState:{exam:null,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}),e.addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.exam=t.payload}),e.addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Error al obtener el examen actual"})}}).reducer;var d=n(6046);function i(){let e=(0,s.wA)(),t=(0,d.useRouter)(),{exam:n,loading:o,error:i}=(0,s.d4)(e=>e.lobby),[c,u]=(0,a.useState)({days:0,hours:0,minutes:0,seconds:0}),[h,m]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!1),[p,g]=(0,a.useState)(900);return((0,a.useEffect)(()=>{e(l())},[e]),(0,a.useEffect)(()=>{if(!n||!n.start_date)return;let e=new Date(n.start_date),t=setInterval(()=>{let n=function(e){let t=new Date().getTime(),n=e.getTime()-t;if(n<=0)return{days:0,hours:0,minutes:0,seconds:0};let r=Math.floor(n/864e5);return{days:r,hours:Math.floor(n%864e5/36e5),minutes:Math.floor(n%36e5/6e4),seconds:Math.floor(n%6e4/1e3)}}(e);u(n),0===n.days&&0===n.hours&&0===n.minutes&&0===n.seconds&&(m(!0),clearInterval(t),function(){f(!0),g(900);let e=setInterval(()=>{g(t=>t<=1?(clearInterval(e),f(!1),0):t-1)},1e3)}())},1e3);return()=>clearInterval(t)},[n]),o)?(0,r.jsx)("div",{children:"Cargando informaci\xf3n del examen..."}):i?(0,r.jsxs)("div",{children:["Error: ",i]}):n?(0,r.jsxs)("div",{style:{padding:"20px"},children:[(0,r.jsxs)("h2",{children:["Lobby - ",n.title]}),(0,r.jsxs)("p",{children:["Inicio programado: ",new Date(n.start_date).toLocaleString()]}),(0,r.jsxs)("p",{children:["Tiempo restante:",(0,r.jsxs)("strong",{children:[" ",function(e){let{days:t,hours:n,minutes:r,seconds:a}=e;return"".concat(t,"d : ").concat(n,"h : ").concat(r,"m : ").concat(a,"s")}(c)," "]})]}),h?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"\xa1Examen iniciado!"}),x?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Ventana de acceso (15 min). Quedan:",(0,r.jsxs)("strong",{children:[" ",function(e){let t=Math.floor(e/60);return"".concat(String(t).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))}(p)]})]}),(0,r.jsx)("button",{onClick:function(){n&&t.push("/exams/".concat(n.id))},children:"Entrar al examen"})]}):(0,r.jsx)("p",{style:{color:"red"},children:"Se ha cerrado la ventana de 15 min. No puedes entrar al examen."})]}):(0,r.jsx)("button",{disabled:!0,children:"El examen a\xfan no ha comenzado"})]}):(0,r.jsx)("div",{children:"No hay examen programado en este momento."})}},6046:(e,t,n)=>{"use strict";var r=n(6658);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[391,943,441,517,358],()=>t(638)),_N_E=e.O()}]);