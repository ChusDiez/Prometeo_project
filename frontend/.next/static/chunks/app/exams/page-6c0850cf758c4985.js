(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{6669:(e,s,t)=>{Promise.resolve().then(t.bind(t,2970))},2970:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var n=t(5155),i=t(2115),r=t(3391),a=t(9442);let l=(0,a.zD)("exam/fetchExamQuestions",async(e,s)=>{let{rejectWithValue:t}=s;try{let e=await fetch("https://prometeoproject-production.up.railway.app/api/exam/questions");if(!e.ok)throw Error("Error al cargar preguntas");return await e.json()}catch(e){return t(e.message)}}),o=(0,a.zD)("exam/submitExamAnswers",async(e,s)=>{let{rejectWithValue:t}=s;try{let s=await fetch("https://prometeoproject-production.up.railway.app/api/exam/submit-answers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("Error al enviar respuestas");return await s.json()}catch(e){return t(e.message)}}),d=(0,a.Z0)({name:"exam",initialState:{currentExam:null,questions:[],results:[],loading:!1,error:null},reducers:{startExam(e,s){e.currentExam=s.payload},submitAnswer(e,s){e.questions.push(s.payload)},setResults(e,s){e.results=s.payload},resetExam(e){e.currentExam=null,e.questions=[],e.results=[],e.loading=!1,e.error=null}},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,s)=>{e.loading=!1,e.questions=s.payload}).addCase(l.rejected,(e,s)=>{e.loading=!1,e.error=s.payload||"Error al cargar preguntas"}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,s)=>{e.loading=!1,e.results.push({score:s.payload.score,totalQuestions:e.questions.length,timestamp:new Date().toISOString()})}).addCase(o.rejected,(e,s)=>{e.loading=!1,e.error=s.payload||"Error al enviar respuestas"})}}),{startExam:c,submitAnswer:u,setResults:p,resetExam:x}=d.actions;function h(){let e=(0,r.wA)(),{questions:s,loading:t,error:a,submitLoading:l,submitError:d,finalScore:c}=(0,r.d4)(e=>e.exam),[u,p]=(0,i.useState)({}),[x,h]=(0,i.useState)({}),[j,f]=(0,i.useState)(3e3),[m,g]=(0,i.useState)(!1),b=(0,i.useRef)([]);function v(e,s){m||p(t=>({...t,[e]:t[e]===s?null:s}))}function C(e,s){m||h(t=>({...t,[e]:t[e]===s?null:s}))}if((0,i.useEffect)(()=>{let e=setInterval(()=>{f(s=>s<=1?(clearInterval(e),g(!0),0):s-1)},1e3);return()=>clearInterval(e)},[]),t)return(0,n.jsx)("div",{children:"Cargando preguntas..."});if(a)return(0,n.jsxs)("div",{children:["Error: ",a]});let E=s||[];return(0,n.jsxs)("div",{style:y.container,children:[(0,n.jsxs)("header",{style:y.header,children:[(0,n.jsx)("div",{style:y.logoArea,children:(0,n.jsx)("img",{src:"/logo.png",alt:"Mi Logo",style:{width:80,height:80,objectFit:"contain"}})}),(0,n.jsxs)("div",{style:y.examInfo,children:[(0,n.jsx)("h1",{style:y.title,children:"Mi Examen"}),(0,n.jsxs)("p",{style:y.timer,children:["Tiempo restante: ",function(e){let s=Math.floor(e/60);return"".concat(String(s).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))}(j)]})]})]}),(0,n.jsxs)("div",{style:y.mainContent,children:[(0,n.jsxs)("aside",{style:y.sidebar,children:[(0,n.jsx)("h3",{style:y.sidebarTitle,children:"Preguntas"}),(0,n.jsx)("div",{style:y.sidebarList,children:E.map((e,s)=>(0,n.jsx)("div",{style:y.sidebarItem,onClick:()=>{b.current[s]&&b.current[s].scrollIntoView({behavior:"smooth"})},children:s+1},s))})]}),(0,n.jsx)("div",{style:y.questionSection,children:E.map((e,s)=>(0,n.jsxs)("div",{ref:e=>b.current[s]=e,style:y.questionBox,children:[(0,n.jsxs)("h4",{style:y.questionText,children:["Pregunta ",s+1,":"]}),(0,n.jsx)("p",{style:y.questionText,children:e.text}),(0,n.jsxs)("div",{style:y.optionsContainer,children:[(0,n.jsxs)("label",{style:y.optionLabel,children:[(0,n.jsx)("input",{type:"checkbox",disabled:m,checked:"A"===u[e.id],onChange:()=>v(e.id,"A")}),e.option_a]}),(0,n.jsxs)("label",{style:y.optionLabel,children:[(0,n.jsx)("input",{type:"checkbox",disabled:m,checked:"B"===u[e.id],onChange:()=>v(e.id,"B")}),e.option_b]}),(0,n.jsxs)("label",{style:y.optionLabel,children:[(0,n.jsx)("input",{type:"checkbox",disabled:m,checked:"C"===u[e.id],onChange:()=>v(e.id,"C")}),e.option_c]})]}),(0,n.jsxs)("div",{style:y.confidenceContainer,children:[(0,n.jsxs)("div",{style:{...y.confidenceItem,border:"100"===x[e.id]?"2px solid #007aff":"1px solid #ccc"},onClick:()=>C(e.id,"100"),children:[(0,n.jsx)("img",{src:"/icons/100.png",alt:"100%",style:y.confidenceIcon}),(0,n.jsx)("span",{children:"100%"})]}),(0,n.jsxs)("div",{style:{...y.confidenceItem,border:"50"===x[e.id]?"2px solid #007aff":"1px solid #ccc"},onClick:()=>C(e.id,"50"),children:[(0,n.jsx)("img",{src:"/icons/50.png",alt:"50%",style:y.confidenceIcon}),(0,n.jsx)("span",{children:"50%"})]}),(0,n.jsxs)("div",{style:{...y.confidenceItem,border:"intuicion"===x[e.id]?"2px solid #007aff":"1px solid #ccc"},onClick:()=>C(e.id,"intuicion"),children:[(0,n.jsx)("img",{src:"/icons/intuicion.png",alt:"Intuici\xf3n",style:y.confidenceIcon}),(0,n.jsx)("span",{children:"Intuici\xf3n"})]}),(0,n.jsxs)("div",{style:{...y.confidenceItem,border:"azar"===x[e.id]?"2px solid #007aff":"1px solid #ccc"},onClick:()=>C(e.id,"azar"),children:[(0,n.jsx)("img",{src:"/icons/azar.png",alt:"Azar",style:y.confidenceIcon}),(0,n.jsx)("span",{children:"Azar"})]})]})]},e.id||s))})]}),(0,n.jsxs)("footer",{style:y.footer,children:[(0,n.jsx)("button",{style:y.submitButton,onClick:function(){e(o({examId:123,payload:{answers:u,confidence:x}}))},disabled:m||l,children:"Enviar Examen"}),d&&(0,n.jsxs)("p",{style:{color:"red"},children:["Error: ",d]}),null!==c&&(0,n.jsxs)("p",{children:["Nota final: ",c]})]})]})}d.reducer;let y={}}},e=>{var s=s=>e(e.s=s);e.O(0,[391,442,441,517,358],()=>s(6669)),_N_E=e.O()}]);